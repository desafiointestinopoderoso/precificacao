<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modelos de Precificação para Sala Ociosa - Clínica Satelle</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header .subtitle {
            color: #7f8c8d;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .base-data {
            background: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
        }

        .base-data h2 {
            color: #e74c3c;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 10px;
        }

        .cost-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .cost-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .cost-card h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .cost-card .value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .proportional-cost {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .proportional-cost h4 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .proportional-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background: #fff;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }

        .checkbox-container input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #667eea;
        }

        .checkbox-container label {
            font-weight: 600;
            color: #495057;
            cursor: pointer;
        }

        .models-container {
            display: grid;
            gap: 30px;
        }

        .model-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }

        .model-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }

        .model-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: white;
            font-weight: bold;
        }

        .model-a .model-icon { background: linear-gradient(45deg, #ff6b6b, #ee5a24); }
        .model-b .model-icon { background: linear-gradient(45deg, #4834d4, #686de0); }
        .model-c .model-icon { background: linear-gradient(45deg, #00d2d3, #54a0ff); }

        .model-title {
            flex: 1;
        }

        .model-title h2 {
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .model-title .subtitle {
            color: #7f8c8d;
            font-style: italic;
        }

        .simulation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9em;
        }

        .simulation-table th,
        .simulation-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .simulation-table th {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            font-weight: 600;
        }

        .simulation-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .simulation-table tr:hover {
            background-color: #e3f2fd;
        }

        .highlight {
            background: linear-gradient(45deg, #f39c12, #e67e22) !important;
            color: white !important;
            font-weight: bold;
        }

        .controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .controls h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .control-item {
            display: flex;
            flex-direction: column;
        }

        .control-item label {
            font-weight: 600;
            margin-bottom: 5px;
            color: #555;
        }

        .control-item input,
        .control-item select {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1em;
        }

        .control-item input:focus,
        .control-item select:focus {
            outline: none;
            border-color: #3498db;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .recommendation {
            background: linear-gradient(135deg, #00c851, #28a745);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .recommendation h2 {
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        /* Estilos para a seção da Sônia */
        .sonia-section {
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 50%, #663399 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            box-shadow: 0 15px 35px rgba(142, 68, 173, 0.3);
            position: relative;
            overflow: hidden;
        }

        .sonia-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .sonia-section h2 {
            font-size: 2.2em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
        }

        .sonia-section .subtitle {
            font-size: 1.2em;
            margin-bottom: 25px;
            opacity: 0.9;
            font-style: italic;
            position: relative;
            z-index: 2;
        }

        .sonia-philosophy {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .sonia-philosophy h4 {
            font-size: 1.3em;
            margin-bottom: 15px;
            color: #f8f9fa;
        }

        .sonia-philosophy p {
            line-height: 1.7;
            font-size: 1.1em;
        }

        .sonia-table {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            overflow: hidden;
            margin: 25px 0;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            position: relative;
            z-index: 2;
        }

        .sonia-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .sonia-table th {
            background: linear-gradient(45deg, #8e44ad, #9b59b6);
            color: white;
            padding: 15px;
            font-weight: 600;
            text-align: center;
            border: none;
        }

        .sonia-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            color: #495057;
            font-weight: 500;
        }

        .sonia-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .sonia-table tr:hover {
            background-color: #e3f2fd;
        }

        .editable-markup {
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 4px;
            padding: 4px 8px;
            font-weight: bold;
            color: #333;
            text-align: center;
            min-width: 60px;
        }

        .editable-markup:focus {
            outline: none;
            border-color: #3498db;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .control-group {
                grid-template-columns: 1fr;
            }
            
            .simulation-table {
                font-size: 0.8em;
            }
            
            .simulation-table th,
            .simulation-table td {
                padding: 8px;
            }

            .sonia-section {
                padding: 25px;
            }

            .sonia-section h2 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏥 Modelos de Precificação para Sala Ociosa</h1>
            <div class="subtitle">Clínica Satelle - Dra. Priscila Hime</div>
            <div style="font-size: 0.9em; color: #7f8c8d; margin-top: 10px;">
                Consultoria: Sônia Guimarães | Janeiro 2025
            </div>
        </div>

        <div style="background: #fff3cd; padding: 15px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 20px;">
            <h4 style="color: #856404; margin-bottom: 10px;">⚠️ Contexto Importante</h4>
            <p style="color: #856404; margin: 0;"><strong>A segunda sala está 100% ociosa atualmente.</strong> Esta é uma oportunidade de transformar um custo fixo em receita. Qualquer modelo implementado representará ganho líquido para a clínica, desde que cubra os custos operacionais incrementais.</p>
        </div>

        <div class="base-data">
            <h2>📊 Base de Cálculo - Tabela da Sônia</h2>
            <div class="cost-grid">
                <div class="cost-card">
                    <h3>Custo/Hora Sem Ociosidade</h3>
                    <div class="value">R$ 86,17</div>
                </div>
                <div class="cost-card">
                    <h3>Custo/Hora Com Ociosidade</h3>
                    <div class="value">R$ 128,62</div>
                </div>
                <div class="cost-card">
                    <h3>Taxa de Ocupação Atual</h3>
                    <div class="value">0%</div>
                    <small style="opacity: 0.8;">Sala completamente ociosa</small>
                </div>
            </div>

            <!-- Nova seção de cálculo proporcional -->
            <div class="proportional-cost">
                <h4>💡 Cálculo Proporcional de Custo/Hora</h4>
                <div class="proportional-controls">
                    <div class="control-item">
                        <label for="horasUsuario">Horas/Mês do Usuário:</label>
                        <input type="number" id="horasUsuario" value="80" min="1" max="160" step="1" onchange="calcularCustoProporcional()">
                    </div>
                    <div class="control-item">
                        <label>Custo/Hora Proporcional Calculado:</label>
                        <div style="padding: 8px 12px; background: #fff; border: 2px solid #28a745; border-radius: 6px; font-weight: bold; color: #28a745;" id="custoProporcional">
                            R$ 107,40
                        </div>
                    </div>
                </div>
                <div class="checkbox-container">
                    <input type="checkbox" id="usarCustoProporcional" onchange="atualizarSimulacoes()">
                    <label for="usarCustoProporcional">Usar este custo/hora proporcional nas simulações abaixo (quando desmarcado, usará a seleção manual sem/com ociosidade)</label>
                </div>
            </div>
        </div>

        <div class="models-container">
            <!-- Modelo A - Repasse Percentual -->
            <div class="model-card model-a">
                <div class="model-header">
                    <div class="model-icon">A</div>
                    <div class="model-title">
                        <h2>Modelo A - Repasse Percentual</h2>
                        <div class="subtitle">Baseado na receita líquida operacional</div>
                    </div>
                </div>
                
                <p><strong>Conceito:</strong> A médica locatária paga um percentual fixo sobre sua receita líquida mensal. O percentual define diretamente a participação da titular na receita gerada e deve cobrir os custos operacionais da sala mais uma margem adequada.</p>
                
                <div class="controls" style="background: #ffe8e8;">
                    <h4>Configuração do Modelo Percentual:</h4>
                    <div class="control-group">
                        <div class="control-item">
                            <label for="percentualModeloA">Percentual de Repasse (%):</label>
                            <input type="number" id="percentualModeloA" value="35" min="15" max="60" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="faturamentoModeloA">Faturamento Mensal Estimado (R$):</label>
                            <input type="number" id="faturamentoModeloA" value="20000" min="5000" max="100000" step="1000" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="horasModeloA">Horas Mensais Utilizadas:</label>
                            <input type="number" id="horasModeloA" value="80" min="16" max="160" step="8" onchange="atualizarSimulacoes()">
                        </div>
                    </div>
                </div>
                
                <table class="simulation-table" id="tabelaModeloA">
                    <thead>
                        <tr>
                            <th>Métrica</th>
                            <th>Valor</th>
                            <th>Análise</th>
                        </tr>
                    </thead>
                    <tbody id="corpoTabelaA">
                        <!-- Preenchido via JavaScript -->
                    </tbody>
                </table>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4>💡 Vantagens:</h4>
                    <ul>
                        <li>Risco compartilhado entre titular e locatária</li>
                        <li>Incentiva alta performance da locatária</li>
                        <li>Potencial de retorno elevado para a titular</li>
                    </ul>
                    <h4>⚠️ Desvantagens:</h4>
                    <ul>
                        <li>Renda variável para a titular</li>
                        <li>Dependência do sucesso da locatária</li>
                        <li>Controle mais complexo</li>
                    </ul>
                </div>
            </div>

            <!-- Modelo B - Aluguel Fixo -->
            <div class="model-card model-b">
                <div class="model-header">
                    <div class="model-icon">B</div>
                    <div class="model-title">
                        <h2>Modelo B - Aluguel Fixo</h2>
                        <div class="subtitle">Valor fixo mensal baseado em horas de uso</div>
                    </div>
                </div>

                <p><strong>Conceito:</strong> A médica locatária paga um valor fixo mensal, independente de seu faturamento. <span style="color: #3498db; font-weight: bold;">Transforma o custo da sala ociosa em receita garantida.</span></p>

                <table class="simulation-table" id="tabelaModeloB">
                    <thead>
                        <tr>
                            <th>Horas/Mês</th>
                            <th>Markup</th>
                            <th>Valor Total Aluguel</th>
                            <th>Custo Mínimo</th>
                            <th>Margem Titular</th>
                            <th>Custo/Hora Locatária</th>
                        </tr>
                    </thead>
                    <tbody id="corpoTabelaB">
                        <!-- Preenchido via JavaScript -->
                    </tbody>
                </table>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <h4>💡 Vantagens:</h4>
                    <ul>
                        <li>Renda fixa e previsível para a titular</li>
                        <li>Simplicidade operacional</li>
                        <li>Proteção contra baixo faturamento da locatária</li>
                    </ul>
                    <h4>⚠️ Desvantagens:</h4>
                    <ul>
                        <li>Titular não se beneficia do sucesso da locatária</li>
                        <li>Pode ser menos atrativo para locatárias iniciantes</li>
                        <li>Risco de inadimplência em cenários ruins</li>
                    </ul>
                </div>
            </div>

            <!-- Modelo C - Híbrido -->
            <div class="model-card model-c">
                <div class="model-header">
                    <div class="model-icon">C</div>
                    <div class="model-title">
                        <h2>Modelo C - Híbrido</h2>
                        <div class="subtitle">Valor fixo + percentual variável</div>
                    </div>
                </div>
                
                <p><strong>Conceito:</strong> Combina um valor fixo mensal com um percentual variável sobre o faturamento que exceder um patamar pré-definido. Oferece receita mínima garantida para a titular e participação no crescimento da locatária.</p>
                
                <div class="controls" style="background: #e8ffff;">
                    <h4>Configuração do Modelo Híbrido:</h4>
                    <div class="control-group">
                        <div class="control-item">
                            <label for="valorFixoModeloC">Valor Fixo Mensal (R$):</label>
                            <input type="number" id="valorFixoModeloC" value="3000" min="1000" max="10000" step="500" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="patamarModeloC">Patamar para % (R$):</label>
                            <input type="number" id="patamarModeloC" value="15000" min="5000" max="50000" step="1000" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="percentualVariavelModeloC">Percentual Variável (%):</label>
                            <input type="number" id="percentualVariavelModeloC" value="15" min="5" max="30" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="faturamentoModeloC">Faturamento Mensal Estimado (R$):</label>
                            <input type="number" id="faturamentoModeloC" value="20000" min="5000" max="100000" step="1000" onchange="atualizarSimulacoes()">
                        </div>
                        <div class="control-item">
                            <label for="horasModeloC">Horas Mensais Utilizadas:</label>
                            <input type="number" id="horasModeloC" value="80" min="16" max="160" step="8" onchange="atualizarSimulacoes()">
                        </div>
                    </div>
                </div>

                <table class="simulation-table" id="tabelaModeloC">
                    <thead>
                        <tr>
                            <th>Métrica</th>
                            <th>Valor</th>
                            <th>Análise</th>
                        </tr>
                    </thead>
                    <tbody id="corpoTabelaC">
                        <!-- Preenchido via JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Seção da Sônia -->
        <div class="sonia-section">
            <h2>🌟 Cenários Sugeridos pela Sônia</h2>
            <div class="subtitle">Abordagem focada na experiência da paciente</div>
            
            <div class="sonia-philosophy">
                <h4>Filosofia da Sônia:</h4>
                <p>O core business do consultório não é o aluguel de salas, mas sim <strong>proporcionar uma experiência excepcional às pacientes e promover a integração harmoniosa dos profissionais que prestam serviços no espaço</strong>. Por isso, os valores sugeridos são mais acessíveis, priorizando a qualidade do atendimento e o relacionamento profissional.</p>
            </div>

            <div class="sonia-table">
                <h3 style="color: #8e44ad; text-align: center; margin-bottom: 20px;">📋 Tabela de Aluguel SEM Ociosidade (Custo: R$ 86,17/hora)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Número de Períodos</th>
                            <th>Horas Semanais</th>
                            <th>Número de Semanas</th>
                            <th>Total Horas/Mês</th>
                            <th>Markup</th>
                            <th>Valor Total/Sala</th>
                            <th>Valor Total Aluguel</th>
                            <th>Valor Total Custo* Mínimo Garantido</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>4</td><td>4</td><td>16</td><td>30%</td><td>R$ 123,11</td><td>R$ 1.969,68</td><td>R$ 1.378,78</td></tr>
                        <tr><td>2</td><td>4</td><td>4</td><td>32</td><td>30%</td><td>R$ 123,11</td><td>R$ 3.939,37</td><td>R$ 2.757,56</td></tr>
                        <tr><td>3</td><td>4</td><td>4</td><td>48</td><td>30%</td><td>R$ 123,11</td><td>R$ 5.909,05</td><td>R$ 4.136,33</td></tr>
                        <tr><td>4</td><td>4</td><td>4</td><td>64</td><td>20%</td><td>R$ 107,72</td><td>R$ 6.893,89</td><td>R$ 5.515,11</td></tr>
                        <tr><td>5</td><td>4</td><td>4</td><td>80</td><td>20%</td><td>R$ 107,72</td><td>R$ 8.617,36</td><td>R$ 6.893,89</td></tr>
                        <tr><td>6</td><td>4</td><td>4</td><td>96</td><td>20%</td><td>R$ 107,72</td><td>R$ 10.340,84</td><td>R$ 8.272,67</td></tr>
                        <tr><td>7</td><td>4</td><td>4</td><td>112</td><td>10%</td><td>R$ 95,75</td><td>R$ 10.723,83</td><td>R$ 9.651,45</td></tr>
                        <tr><td>8</td><td>4</td><td>4</td><td>128</td><td>10%</td><td>R$ 95,75</td><td>R$ 12.255,81</td><td>R$ 11.030,23</td></tr>
                        <tr><td>9</td><td>4</td><td>4</td><td>144</td><td>10%</td><td>R$ 95,75</td><td>R$ 13.787,78</td><td>R$ 12.409,00</td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="recommendation">
            <h2>💡 Recomendação Estratégica</h2>
            <p>Com base na análise dos três modelos, recomenda-se iniciar com o <strong>Modelo C (Híbrido)</strong> por oferecer:</p>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li>Receita mínima garantida através do valor fixo</li>
                <li>Participação no crescimento da locatária via percentual variável</li>
                <li>Flexibilidade para ajustes conforme a evolução do negócio</li>
                <li>Menor risco financeiro comparado ao modelo puramente percentual</li>
            </ul>
            <p>O modelo pode ser reavaliado trimestralmente para otimização contínua dos resultados.</p>
        </div>
    </div>

    <script>
        function calcularCustoProporcional() {
            const horas = parseFloat(document.getElementById("horasUsuario").value);
            const custoMin = 86.17; // Custo para 160 horas
            const custoMax = 128.62; // Custo para 1 hora
            const rangeHoras = 159; // De 1 a 160 (160 - 1)

            let custoCalculado;

            if (horas <= 1) {
                custoCalculado = custoMax;
            } else if (horas >= 160) {
                custoCalculado = custoMin;
            } else {
                // Interpolação linear
                custoCalculado = custoMax - ((horas - 1) / rangeHoras) * (custoMax - custoMin);
            }

            document.getElementById("custoProporcional").innerText = `R$ ${custoCalculado.toFixed(2).replace(".", ",")}`;
            atualizarSimulacoes(); // Chamar para atualizar os modelos
        }

        function obterCustoHora() {
            const usarProporcional = document.getElementById("usarCustoProporcional").checked;
            
            if (usarProporcional) {
                const horas = parseFloat(document.getElementById("horasUsuario").value);
                const custoMin = 86.17;
                const custoMax = 128.62;
                const rangeHoras = 159;

                if (horas <= 1) {
                    return custoMax;
                } else if (horas >= 160) {
                    return custoMin;
                } else {
                    return custoMax - ((horas - 1) / rangeHoras) * (custoMax - custoMin);
                }
            } else {
                // Usar valores fixos (assumindo com ociosidade por padrão)
                return 128.62;
            }
        }

        function atualizarSimulacoes() {
            atualizarModeloA();
            atualizarModeloB();
            atualizarModeloC();
        }

        function atualizarModeloA() {
            const percentual = parseFloat(document.getElementById("percentualModeloA").value);
            const faturamento = parseFloat(document.getElementById("faturamentoModeloA").value);
            const horas = parseFloat(document.getElementById("horasModeloA").value);
            const custoHora = obterCustoHora();
            
            const repasseBruto = faturamento * (percentual / 100);
            const impostos = repasseBruto * 0.08; // 8% de impostos
            const repasseLiquido = repasseBruto - impostos;
            const custoTotal = horas * custoHora;
            const margem = repasseLiquido - custoTotal;
            const coberturaPercentual = (repasseLiquido / custoTotal) * 100;
            const percentualMargem = ((margem / repasseLiquido) * 100).toFixed(1);
            
            let analiseViabilidade;
            if (margem > 0) {
                analiseViabilidade = "✅ Adequada";
            } else {
                analiseViabilidade = "❌ Insuficiente";
            }

            let analiseCobertura;
            if (coberturaPercentual >= 100) {
                analiseCobertura = "Suficiente";
            } else {
                analiseCobertura = "Insuficiente";
            }

            let analiseMargem;
            if (margem > 0) {
                analiseMargem = `+${percentualMargem}% em relação ao repasse líquido`;
            } else {
                analiseMargem = `${percentualMargem}% em relação ao repasse líquido`;
            }

            const tbody = document.getElementById("corpoTabelaA");
            tbody.innerHTML = `
                <tr>
                    <td>Faturamento Mensal</td>
                    <td>R$ ${faturamento.toLocaleString('pt-BR')}</td>
                    <td>Base de cálculo</td>
                </tr>
                <tr>
                    <td>Percentual de Repasse</td>
                    <td>${percentual.toFixed(1)}%</td>
                    <td>Sobre receita bruta</td>
                </tr>
                <tr>
                    <td>Repasse Bruto</td>
                    <td>R$ ${repasseBruto.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Antes dos impostos</td>
                </tr>
                <tr>
                    <td>Impostos Estimados (8%)</td>
                    <td>R$ ${impostos.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>ISS + outros tributos</td>
                </tr>
                <tr>
                    <td>Repasse Líquido</td>
                    <td>R$ ${repasseLiquido.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Valor efetivo à titular</td>
                </tr>
                <tr>
                    <td>Custo da Sala (${horas}h)</td>
                    <td>R$ ${custoTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Custo operacional</td>
                </tr>
                <tr>
                    <td>Cobertura de Custo</td>
                    <td>${coberturaPercentual.toFixed(1)}%</td>
                    <td>${analiseCobertura}</td>
                </tr>
                <tr>
                    <td>Margem da Titular</td>
                    <td>R$ ${margem.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>${analiseMargem}</td>
                </tr>
                <tr>
                    <td>Viabilidade Geral</td>
                    <td>${analiseViabilidade}</td>
                    <td>Ajustes necessários</td>
                </tr>
            `;
        }

        function atualizarModeloB() {
            const custoHora = obterCustoHora();
            const horasOpcoes = [16, 32, 48, 64, 80, 96, 112, 128, 144, 160];
            const markupsOpcoes = [30, 30, 30, 20, 20, 20, 10, 10, 10, 10];
            
            let tbody = document.getElementById("corpoTabelaB");
            tbody.innerHTML = "";
            
            horasOpcoes.forEach((horas, index) => {
                const markup = markupsOpcoes[index];
                const custoMinimo = horas * custoHora;
                const valorAluguel = custoMinimo * (1 + markup / 100);
                const margemTitular = valorAluguel - custoMinimo;
                const custoHoraLocataria = valorAluguel / horas;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${horas}</td>
                    <td><input type="number" class="editable-markup" value="${markup}" min="0" max="100" onchange="atualizarLinhaModeloB(this, ${index})"></td>
                    <td>R$ ${valorAluguel.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>R$ ${custoMinimo.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>R$ ${margemTitular.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>R$ ${custoHoraLocataria.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function atualizarLinhaModeloB(input, index) {
            const custoHora = obterCustoHora();
            const horasOpcoes = [16, 32, 48, 64, 80, 96, 112, 128, 144, 160];
            const horas = horasOpcoes[index];
            const markup = parseFloat(input.value);
            
            const custoMinimo = horas * custoHora;
            const valorAluguel = custoMinimo * (1 + markup / 100);
            const margemTitular = valorAluguel - custoMinimo;
            const custoHoraLocataria = valorAluguel / horas;
            
            const row = input.closest('tr');
            const cells = row.cells;
            cells[2].textContent = `R$ ${valorAluguel.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            cells[3].textContent = `R$ ${custoMinimo.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            cells[4].textContent = `R$ ${margemTitular.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
            cells[5].textContent = `R$ ${custoHoraLocataria.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        }

        function atualizarModeloC() {
            const valorFixo = parseFloat(document.getElementById("valorFixoModeloC").value);
            const patamar = parseFloat(document.getElementById("patamarModeloC").value);
            const percentualVariavel = parseFloat(document.getElementById("percentualVariavelModeloC").value);
            const faturamento = parseFloat(document.getElementById("faturamentoModeloC").value);
            const horas = parseFloat(document.getElementById("horasModeloC").value);
            const custoHora = obterCustoHora();
            
            let valorVariavel = 0;
            if (faturamento > patamar) {
                valorVariavel = (faturamento - patamar) * (percentualVariavel / 100);
            }
            
            const totalRepasse = valorFixo + valorVariavel;
            const impostos = totalRepasse * 0.08; // 8% de impostos
            const repasseLiquido = totalRepasse - impostos;
            const custoTotal = horas * custoHora;
            const margem = repasseLiquido - custoTotal;
            const coberturaPercentual = (repasseLiquido / custoTotal) * 100;
            const percentualMargem = ((margem / repasseLiquido) * 100).toFixed(1);
            
            let analiseViabilidade;
            if (margem > 0) {
                analiseViabilidade = "✅ Adequada";
            } else {
                analiseViabilidade = "❌ Insuficiente";
            }

            let analiseCobertura;
            if (coberturaPercentual >= 100) {
                analiseCobertura = "Suficiente";
            } else {
                analiseCobertura = "Insuficiente";
            }

            let analiseMargem;
            if (margem > 0) {
                analiseMargem = `+${percentualMargem}% em relação ao repasse líquido`;
            } else {
                analiseMargem = `${percentualMargem}% em relação ao repasse líquido`;
            }

            const tbody = document.getElementById("corpoTabelaC");
            tbody.innerHTML = `
                <tr>
                    <td>Faturamento Mensal</td>
                    <td>R$ ${faturamento.toLocaleString('pt-BR')}</td>
                    <td>Base de cálculo</td>
                </tr>
                <tr>
                    <td>Valor Fixo Mensal</td>
                    <td>R$ ${valorFixo.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Receita garantida</td>
                </tr>
                <tr>
                    <td>Patamar para Percentual</td>
                    <td>R$ ${patamar.toLocaleString('pt-BR')}</td>
                    <td>Limite para cobrança variável</td>
                </tr>
                <tr>
                    <td>Valor Variável</td>
                    <td>R$ ${valorVariavel.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>${percentualVariavel}% sobre excedente</td>
                </tr>
                <tr>
                    <td>Total Repasse Bruto</td>
                    <td>R$ ${totalRepasse.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Antes dos impostos</td>
                </tr>
                <tr>
                    <td>Impostos Estimados (8%)</td>
                    <td>R$ ${impostos.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>ISS + outros tributos</td>
                </tr>
                <tr>
                    <td>Repasse Líquido</td>
                    <td>R$ ${repasseLiquido.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Valor efetivo à titular</td>
                </tr>
                <tr>
                    <td>Custo da Sala (${horas}h)</td>
                    <td>R$ ${custoTotal.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>Custo operacional</td>
                </tr>
                <tr>
                    <td>Cobertura de Custo</td>
                    <td>${coberturaPercentual.toFixed(1)}%</td>
                    <td>${analiseCobertura}</td>
                </tr>
                <tr>
                    <td>Margem da Titular</td>
                    <td>R$ ${margem.toLocaleString('pt-BR', {minimumFractionDigits: 2})}</td>
                    <td>${analiseMargem}</td>
                </tr>
                <tr>
                    <td>Viabilidade Geral</td>
                    <td>${analiseViabilidade}</td>
                    <td>Ajustes necessários</td>
                </tr>
            `;
        }

        // Inicializar cálculos
        document.addEventListener('DOMContentLoaded', function() {
            calcularCustoProporcional();
            atualizarSimulacoes();
        });
    </script>
</body>
</html>

